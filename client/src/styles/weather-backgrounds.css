/* weather-background.css
   =========================================================
   DYNAMIC WEATHER EFFECTS + "IMAGE-LIKE" BACKGROUNDS (NO JPGs)
   ========================================================= */

/* Always allow pseudo-elements */
.background-overlay{
  position: fixed;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
}

/* Put app content above the overlay */
.dashboard{
  position: relative;
  z-index: 1;
}

/* Optional subtle grain texture for depth */
.background-overlay::marker { content: ""; } /* (noop, keeps some linters quiet) */

/* Grain layer (very subtle). Uses only CSS gradients (no images). */
.background-overlay::after{
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.06;
  background:
    repeating-linear-gradient(0deg, rgba(255,255,255,0.06) 0 1px, transparent 1px 3px),
    repeating-linear-gradient(90deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 4px);
  mix-blend-mode: overlay;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .background-overlay::before,
  .background-overlay::after {
    animation: none !important;
    transition: none !important;
  }
}

/* =========================================================
   "IMAGE-LIKE" BASE BACKGROUNDS (per condition)
   These are layered gradients that look like sky photos.
   ========================================================= */

.background-overlay.background-clear{
  background:
    radial-gradient(circle at 20% 18%, rgba(255, 220, 140, 0.55), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(120, 200, 255, 0.35), transparent 50%),
    linear-gradient(180deg, #4aa3ff 0%, #1a1a2e 70%);
}

.background-overlay.background-clouds{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.22), transparent 55%),
    radial-gradient(circle at 70% 55%, rgba(210,230,255,0.18), transparent 60%),
    linear-gradient(180deg, #2f3b57 0%, #141a2b 70%);
}

.background-overlay.background-rain{
  background:
    radial-gradient(circle at 30% 25%, rgba(120,170,255,0.20), transparent 55%),
    radial-gradient(circle at 80% 70%, rgba(60,120,200,0.16), transparent 60%),
    linear-gradient(180deg, #1b2a46 0%, #0b1020 75%);
}

.background-overlay.background-snow{
  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,0.30), transparent 55%),
    radial-gradient(circle at 70% 70%, rgba(200,230,255,0.18), transparent 60%),
    linear-gradient(180deg, #3b5068 0%, #0f1626 75%);
}

.background-overlay.background-thunderstorm{
  background:
    radial-gradient(circle at 25% 20%, rgba(200,170,255,0.22), transparent 55%),
    radial-gradient(circle at 75% 65%, rgba(90,120,200,0.18), transparent 60%),
    linear-gradient(180deg, #1a1630 0%, #070a14 80%);
}

.background-overlay.background-night{
  background:
    radial-gradient(circle at 50% 25%, rgba(120,120,255,0.18), transparent 55%),
    radial-gradient(circle at 20% 70%, rgba(255,255,255,0.08), transparent 65%),
    linear-gradient(180deg, #050814 0%, #070a14 80%);
}

/* =========================================================
   YOUR EXISTING EFFECTS (kept, slightly adjusted to not fight ::after grain)
   NOTE: we will use ::before for the weather effect layers.
   ========================================================= */

/* ---------------------------
   CLEAR: soft sun-glow shimmer
---------------------------- */
.background-overlay.background-clear::before {
  content: "";
  position: fixed;
  inset: -20%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.35;
  background:
    radial-gradient(circle at 20% 18%, rgba(255,255,255,0.35), transparent 55%),
    radial-gradient(circle at 78% 30%, rgba(255,255,255,0.18), transparent 60%);
  filter: blur(0.6px);
  animation: clearGlow 6s ease-in-out infinite;
}

@keyframes clearGlow {
  0%, 100% { transform: translate3d(0,0,0) scale(1); opacity: 0.25; }
  50%      { transform: translate3d(10px,-10px,0) scale(1.02); opacity: 0.40; }
}

/* ---------------------------
   CLOUDS: slow drifting fog layers
---------------------------- */
.background-overlay.background-clouds::before{
  content: "";
  position: fixed;
  inset: -30%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.28;
  filter: blur(18px);
  background:
    radial-gradient(circle at 20% 40%, rgba(255,255,255,0.45), transparent 55%),
    radial-gradient(circle at 55% 35%, rgba(255,255,255,0.25), transparent 60%),
    radial-gradient(circle at 75% 55%, rgba(255,255,255,0.35), transparent 58%);
  animation: cloudsDrift1 18s linear infinite;
}

@keyframes cloudsDrift1 {
  0%   { transform: translate3d(-6%, 0, 0); }
  100% { transform: translate3d( 6%, 0, 0); }
}

/* ---------------------------
   RAIN: droplets + streaks
   (We keep streaks on ::before to avoid colliding with the grain ::after)
---------------------------- */
.background-overlay.background-rain::before{
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.40;
  background-image:
    repeating-linear-gradient(
      115deg,
      rgba(255,255,255,0.18) 0px,
      rgba(255,255,255,0.18) 1px,
      transparent 1px,
      transparent 10px
    );
  filter: blur(0.4px);
  animation: rainStreaksFall 0.9s linear infinite;
}

@keyframes rainStreaksFall {
  0%   { transform: translate3d(0, -40px, 0); }
  100% { transform: translate3d(0, 220px, 0); }
}

/* ---------------------------
   SNOW: gentle falling flakes
---------------------------- */
.background-overlay.background-snow::before{
  content: "";
  position: fixed;
  inset: -10%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.40;
  background-image:
    radial-gradient(circle, rgba(255,255,255,0.85) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,0.70) 0 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,0.60) 0 1px, transparent 2px);
  background-size: 180px 180px, 240px 240px, 320px 320px;
  background-position: 0 0, 60px 120px, 120px 60px;
  filter: blur(0.2px);
  animation: snowFall 10s linear infinite;
}

@keyframes snowFall {
  0%   { transform: translate3d(0, -12%, 0); }
  100% { transform: translate3d(-3%, 12%, 0); }
}

/* ---------------------------
   THUNDERSTORM: heavy rain + lightning flash
   (Lightning uses box-shadow-like flash via animation on ::before)
---------------------------- */
.background-overlay.background-thunderstorm::before{
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.50;
  background-image:
    repeating-linear-gradient(
      115deg,
      rgba(255,255,255,0.22) 0px,
      rgba(255,255,255,0.22) 1px,
      transparent 1px,
      transparent 8px
    );
  filter: blur(0.35px);
  animation: stormRain 0.7s linear infinite, lightningFlash 7s ease-in-out infinite;
}

@keyframes stormRain {
  0%   { transform: translate3d(0, -60px, 0); }
  100% { transform: translate3d(0, 280px, 0); }
}

/* Random-ish lightning pulses */
@keyframes lightningFlash {
  0%, 92%, 100% { box-shadow: inset 0 0 0 0 rgba(255,255,255,0); }
  93%           { box-shadow: inset 0 0 0 9999px rgba(255,255,255,0.14); }
  93.7%         { box-shadow: inset 0 0 0 0 rgba(255,255,255,0); }
  94.2%         { box-shadow: inset 0 0 0 9999px rgba(255,255,255,0.22); }
  94.8%         { box-shadow: inset 0 0 0 0 rgba(255,255,255,0); }
}

/* ---------------------------
   NIGHT: subtle moving stars
---------------------------- */
.background-overlay.background-night::before{
  content: "";
  position: fixed;
  inset: -20%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.40;
  background-image:
    radial-gradient(circle at 10% 15%, rgba(255,255,255,0.7) 0 1px, transparent 2px),
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.55) 0 1px, transparent 2px),
    radial-gradient(circle at 60% 18%, rgba(255,255,255,0.6) 0 1px, transparent 2px),
    radial-gradient(circle at 80% 40%, rgba(255,255,255,0.5) 0 1px, transparent 2px),
    radial-gradient(circle at 25% 70%, rgba(255,255,255,0.45) 0 1px, transparent 2px),
    radial-gradient(circle at 70% 75%, rgba(255,255,255,0.55) 0 1px, transparent 2px);
  background-size: 420px 420px;
  animation: starsDrift 22s linear infinite;
}

@keyframes starsDrift {
  0%   { transform: translate3d(0, 0, 0); }
  100% { transform: translate3d(-4%, 3%, 0); }
}
