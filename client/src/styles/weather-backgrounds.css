/* weather-background.css
   =========================================================
   DYNAMIC WEATHER EFFECTS + "IMAGE-LIKE" BACKGROUNDS (NO JPGs)
   ========================================================= */

/* Always allow pseudo-elements */
.background-overlay{
  position: fixed;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
}

/* Put app content above the overlay */
.dashboard{
  position: relative;
  z-index: 1;
}

/* Optional subtle grain texture for depth */
.background-overlay::marker { content: ""; } /* (noop, keeps some linters quiet) */

/* Grain layer (very subtle). Uses only CSS gradients (no images). */
.background-overlay::after{
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0.06;
  background:
    repeating-linear-gradient(0deg, rgba(255,255,255,0.06) 0 1px, transparent 1px 3px),
    repeating-linear-gradient(90deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 4px);
  mix-blend-mode: overlay;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .background-overlay::before,
  .background-overlay::after {
    animation: none !important;
    transition: none !important;
  }
}

/* =========================================================
   "IMAGE-LIKE" BASE BACKGROUNDS (per condition)
   These are layered gradients that look like sky photos.
   ========================================================= */

.background-overlay.background-clear{
  background:
    radial-gradient(circle at 20% 18%, rgba(255, 220, 140, 0.55), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(120, 200, 255, 0.35), transparent 50%),
    linear-gradient(180deg, #4aa3ff 0%, #1a1a2e 70%);
}

.background-overlay.background-clouds{
  background:
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.22), transparent 55%),
    radial-gradient(circle at 70% 55%, rgba(210,230,255,0.18), transparent 60%),
    linear-gradient(180deg, #2f3b57 0%, #141a2b 70%);
}

.background-overlay.background-rain{
  background:
    radial-gradient(circle at 30% 25%, rgba(120,170,255,0.20), transparent 55%),
    radial-gradient(circle at 80% 70%, rgba(60,120,200,0.16), transparent 60%),
    linear-gradient(180deg, #1b2a46 0%, #0b1020 75%);
}

.background-overlay.background-snow{
  background:
    radial-gradient(circle at 35% 25%, rgba(255,255,255,0.30), transparent 55%),
    radial-gradient(circle at 70% 70%, rgba(200,230,255,0.18), transparent 60%),
    linear-gradient(180deg, #3b5068 0%, #0f1626 75%);
}

.background-overlay.background-thunderstorm{
  background:
    radial-gradient(circle at 25% 20%, rgba(200,170,255,0.22), transparent 55%),
    radial-gradient(circle at 75% 65%, rgba(90,120,200,0.18), transparent 60%),
    linear-gradient(180deg, #1a1630 0%, #070a14 80%);
}

.background-overlay.background-night{
  background:
    radial-gradient(circle at 50% 25%, rgba(120,120,255,0.18), transparent 55%),
    radial-gradient(circle at 20% 70%, rgba(255,255,255,0.08), transparent 65%),
    linear-gradient(180deg, #050814 0%, #070a14 80%);
}

/* =========================================================
   EFFECT LAYERS (use ::before)
   - Rain = droplets only
   - Snow = flakes via ::before (NO HTML change needed)
   ========================================================= */

/* ---------------------------
   CLEAR: sun bloom + gentle shimmer
---------------------------- */
.background-overlay.background-clear::before {
  content: "";
  position: fixed;
  inset: -25%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.45;
  background:
    radial-gradient(circle at 22% 18%, rgba(255,255,255,0.38), transparent 52%),
    radial-gradient(circle at 18% 14%, rgba(255,240,200,0.32), transparent 45%),
    radial-gradient(circle at 70% 30%, rgba(255,255,255,0.14), transparent 60%);
  filter: blur(0.8px);
  animation: clearGlow 7s ease-in-out infinite;
}

@keyframes clearGlow {
  0%, 100% { transform: translate3d(0,0,0) scale(1); opacity: 0.34; }
  50%      { transform: translate3d(14px,-10px,0) scale(1.03); opacity: 0.52; }
}

/* ---------------------------
   CLOUDS: layered drifting fog blobs
---------------------------- */
.background-overlay.background-clouds::before{
  content: "";
  position: fixed;
  inset: -35%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.30;
  filter: blur(22px);
  background:
    radial-gradient(circle at 18% 42%, rgba(255,255,255,0.50), transparent 58%),
    radial-gradient(circle at 52% 32%, rgba(255,255,255,0.26), transparent 62%),
    radial-gradient(circle at 78% 52%, rgba(255,255,255,0.34), transparent 60%),
    radial-gradient(circle at 40% 65%, rgba(210,230,255,0.18), transparent 62%);
  animation: cloudsDrift 22s linear infinite;
}

@keyframes cloudsDrift {
  0%   { transform: translate3d(-7%, 0, 0); }
  50%  { transform: translate3d( 4%, -1%, 0); }
  100% { transform: translate3d( 7%, 0, 0); }
}

/* ---------------------------
   RAIN: droplets only (no lines)
---------------------------- */
.background-overlay.background-rain::before{
  content: "";
  position: fixed;
  inset: -20%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.65;

  background-image:
    radial-gradient(circle, rgba(255,255,255,0.32) 0 1.6px, transparent 2.8px),
    radial-gradient(circle, rgba(255,255,255,0.22) 0 1.2px, transparent 2.4px),
    radial-gradient(circle, rgba(255,255,255,0.16) 0 0.9px, transparent 2.0px);

  background-size:
    110px 150px,
    80px 120px,
    55px 95px;

  background-position:
    0 -220px,
    30px -340px,
    14px -180px;

  filter: blur(0.15px);
  animation: rainDropsFall 0.9s linear infinite;
}

@keyframes rainDropsFall {
  0% {
    background-position:
      0 -260px,
      30px -420px,
      14px -240px;
  }
  100% {
    background-position:
      -25px 260px,
      10px 220px,
      -18px 320px;
  }
}

/* ---------------------------
   SNOW: flakes using ::before only (NO HTML change)
---------------------------- */
.background-overlay.background-snow::before{
  content: "";
  position: fixed;
  inset: -20%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.60;

  background-image:
    radial-gradient(circle, rgba(255,255,255,0.95) 0 1.6px, transparent 3.2px),
    radial-gradient(circle, rgba(255,255,255,0.80) 0 1.2px, transparent 2.8px),
    radial-gradient(circle, rgba(255,255,255,0.65) 0 1px, transparent 2.5px);

  background-size:
    160px 160px,
    240px 240px,
    320px 320px;

  background-position:
    0 -200px,
    80px -360px,
    140px -280px;

  filter: blur(0.15px);
  animation: snowFallLayers 14s linear infinite;
}

@keyframes snowFallLayers{
  0%{
    background-position:
      0 -260px,
      80px -520px,
      140px -420px;
  }
  100%{
    background-position:
      -60px 320px,
      30px 260px,
      -10px 360px;
  }
}

/* ---------------------------
   THUNDERSTORM: heavier droplets + lightning (no lines)
---------------------------- */
.background-overlay.background-thunderstorm::before{
  content: "";
  position: fixed;
  inset: -20%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.70;

  background-image:
    radial-gradient(circle, rgba(255,255,255,0.36) 0 1.9px, transparent 3.2px),
    radial-gradient(circle, rgba(255,255,255,0.24) 0 1.3px, transparent 2.6px),
    radial-gradient(circle, rgba(255,255,255,0.14) 0 0.9px, transparent 2.1px);

  background-size:
    95px 135px,
    70px 110px,
    55px 95px;

  background-position:
    0 -320px,
    25px -520px,
    10px -260px;

  filter: blur(0.12px);
  animation: stormDropsFall 0.65s linear infinite, lightningFlash 7s ease-in-out infinite;
}

@keyframes stormDropsFall{
  0%{
    background-position:
      0 -420px,
      25px -700px,
      10px -420px;
  }
  100%{
    background-position:
      -40px 360px,
      0px 260px,
      -25px 420px;
  }
}

/* Random-ish lightning pulses */
@keyframes lightningFlash {
  0%, 92%, 100% { box-shadow: inset 0 0 0 0 rgba(255,255,255,0); }
  93%           { box-shadow: inset 0 0 0 9999px rgba(255,255,255,0.12); }
  93.7%         { box-shadow: inset 0 0 0 0 rgba(255,255,255,0); }
  94.2%         { box-shadow: inset 0 0 0 9999px rgba(255,255,255,0.20); }
  94.8%         { box-shadow: inset 0 0 0 0 rgba(255,255,255,0); }
}

/* ---------------------------
   NIGHT: stars + subtle twinkle
---------------------------- */
.background-overlay.background-night::before{
  content: "";
  position: fixed;
  inset: -20%;
  pointer-events: none;
  z-index: 0;
  opacity: 0.45;
  background-image:
    radial-gradient(circle at 10% 15%, rgba(255,255,255,0.75) 0 1px, transparent 2px),
    radial-gradient(circle at 35% 30%, rgba(255,255,255,0.55) 0 1px, transparent 2px),
    radial-gradient(circle at 60% 18%, rgba(255,255,255,0.60) 0 1px, transparent 2px),
    radial-gradient(circle at 80% 40%, rgba(255,255,255,0.50) 0 1px, transparent 2px),
    radial-gradient(circle at 25% 70%, rgba(255,255,255,0.45) 0 1px, transparent 2px),
    radial-gradient(circle at 70% 75%, rgba(255,255,255,0.55) 0 1px, transparent 2px);
  background-size: 420px 420px;
  animation: starsDrift 26s linear infinite, starsTwinkle 5.5s ease-in-out infinite;
}

@keyframes starsDrift {
  0%   { transform: translate3d(0, 0, 0); }
  100% { transform: translate3d(-4%, 3%, 0); }
}

@keyframes starsTwinkle {
  0%, 100% { opacity: 0.35; filter: blur(0px); }
  50%      { opacity: 0.55; filter: blur(0.25px); }
}